### Phase 1: Create the VPC and Subnets

Objective: Create the isolated network (VPC) and divide it into a Public section (for the user-facing app) and a Private section (for the secure database).

1.  Open VPC Wizard

      Navigate to the VPC Dashboard and start the wizard to automate creation. 
      Click Create VPC   \> Select   VPC and more  .

2.    Configure Network Settings  

         Sets up the IP range and subnet structure in one go. 
          Name tag auto-generation:   `Lab7`
          IPv4 CIDR block:   `10.0.0.0/16`
          Number of Availability Zones (AZs):   `1`
          Number of public subnets:   `1`
          Number of private subnets:   `1`
          NAT gateways:   `None`  (Keeps it free; backend won't have internet, which is fine for this lab) .
          VPC endpoints:   `None`
        Click   Create VPC  .


###   Phase 2: Create Security Groups (Firewalls)  

 Objective: Define strict rules. Frontend allows public access. Backend ONLY allows access from the Frontend. 

1.    Create Frontend Security Group  

         Navigate to   Security   \>   Security Groups   \>   Create security group  . 
          Name:   `SG-Frontend`
          VPC:   Select `Lab7-VPC`.
          Inbound Rules:  
            Type:   SSH   | Source:   Anywhere-IPv4   (0.0.0.0/0)
            Type:   HTTP   | Source:   Anywhere-IPv4   (0.0.0.0/0)

2.    Create Backend Security Group  

         This is the critical step for "Task 4". It creates a "Security Group Chaining" rule. 
          Name:   `SG-Backend`
          VPC:   Select `Lab7-VPC`.
          Inbound Rules:  
            Type:   MYSQL/Aurora   (Port 3306) | Source:   Custom   \> Select `SG-Frontend` from the list.
         Comment: This ensures ONLY instances with the Frontend Security Group can talk to the database port. 

-----

###   Phase 3: Launch Frontend Instance  

 Objective: Place a server in the Public Subnet so it can accept traffic from the internet. 

1.    Launch Instance  

         Go to   EC2 Dashboard   \>   Launch Instances  . 
          Name:   `Frontend-Server`
          OS/Image:   Amazon Linux 2023 (or Ubuntu).
          Instance Type:   `t2.micro` (Free tier).
          Key Pair:   Select an existing key (or create new `.pem`).

2.    Network Settings (Edit)  

          VPC:   Select `Lab7-VPC`.
          Subnet:   Select `Lab7-subnet-public1` (Important\!).
          Auto-assign Public IP:     Enable   (Crucial for public access).
          Firewall (Security groups):   Select existing \> `SG-Frontend`.
        Click   Launch instance  .

-----

###   Phase 4: Launch Backend Instance  

 Objective: Place a server in the Private Subnet so it is hidden from the internet. 

1.    Launch Instance  

         Go to   EC2 Dashboard   \>   Launch Instances  . 
          Name:   `Backend-Server`
          OS/Image:   Amazon Linux 2023.
          Instance Type:   `t2.micro`.
          Key Pair:   Select the same key as above.

2.    Network Settings (Edit)  

          VPC:   Select `Lab7-VPC`.
          Subnet:   Select `Lab7-subnet-private1` (Important\!).
          Auto-assign Public IP:     Disable   (Default; keeps it private).
          Firewall (Security groups):   Select existing \> `SG-Backend`.
        Click   Launch instance  .

-----

###   How to Verify (Minimal Commands)  

Since the backend has no Public IP, you cannot SSH to it directly. You must "Jump" from the Frontend.

1.    SSH into Frontend:  

    ```bash
    ssh -i my-key.pem ec2-user@<FRONTEND_PUBLIC_IP>
    ```

2.    Test Connection to Backend (Task 4):  
     Use `nc` (netcat) to test if the DB port (3306) is open. 

    ```bash
    nc -zv <BACKEND_PRIVATE_IP> 3306
    ```
If you get a "command not found" error, it means your Ubuntu image is the "minimal" version. You can quickly install netcat with this command:


sudo apt update && sudo apt install netcat-openbsd -y
After installing, run the nc -zv ... command again.

         Output `Connection to ... port 3306 [tcp/mysql] succeeded!` means the Security Group chaining worked. 